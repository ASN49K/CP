//Nu Pot exista diferente dintre [l,k] si [k+1,r] chiar daca ar fi ambele egale assertul din linia y
//dp[l][k]>0 foarte importanta conditia (am luat assert fail acolo, sau cum se numeste), linia 34
//dp[l,r] = numarul maxim format cu toate numerele din intervalul (l,r)
#include <bits/stdc++.h>
using namespace std;
#define all(x) x.begin(),x.end()
#define pb push_back
#define bug(x) cerr<<#x<<" ( "<<x<<endl
using i64=long long;
const int inf=1e9;
const int mod=1e9+7;
int main()
{
    ifstream cin("248.in");
    ofstream cout("248.out");
    int n;
    cin>>n;
    vector<vector<int>>dp(n,vector<int>(n,-inf));
    int rez=0;
    for(int i=0;i<n;i++)
    {
        cin>>dp[i][i];
        rez=max(rez,dp[i][i]);
    }
    for(int l=n-1;l>=0;l--)
    {
        for(int r=l+1;r<n;r++)
        {
            for(int k=l;k<r;k++)
            {
                if(dp[l][k]>0 && dp[l][k]==dp[k+1][r])
                {
                    dp[l][r]=dp[l][k]+1;
                }
            }
            rez=max(rez,dp[l][r]);
        }
    }
    cout<<rez;
}
